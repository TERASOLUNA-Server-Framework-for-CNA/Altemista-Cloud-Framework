
:fragment:

Before deploying an image from an openshift registry in Altemista, it is needed to push it. 
The OpenShift registry is used as a Docker registry, but it is "multitenant", all users use the same registry but they only have access to pull/push to their projects space.
The registry external URL is docker-registry-default.helix.everis.cloud. This URL is accessible from Internet (it is not necessary to be connected to the VPN). As we have said before, the registry is used as normal docker registry. 

Our Docker tool need to be configured in order to accept this remote registry as insecure, otherwise will not allow us to push or pull images.
To do so add the following insecure registries to de Daemon.json configuration file.
/etc/docker/Daemon.json or %PROGRAMDATA%/Docker/config/daemon.json in windows. You can create the file if don´t exist.
Add:

[source,json]
./daemon.json
----
{
 "insecure-registries": ["172.30.6.125", "docker-registry-default.helix.everis.cloud"] 
}

----

First step is to login in your oc client. If you go to the web console and click on "Copy Login Command" which is on the top right of your console where your name is:

image::altemista-cloudfwk-documentation/altemista/copy_login.png[align="center"]

You can paste into the command line:

image::altemista-cloudfwk-documentation/altemista/oc_login.png[align="center"]

Let´s move on to authenticate into his docker registry.

[source,sh,subs="verbatim,attributes"]
----
docker login docker-registry-default.helix.everis.cloud
----

IMPORTANT: Remember, your password, you have to use the OAuth token generated by OpenShift ("oc whoami -t")

Next step is tag the image

[source,sh,subs="verbatim,attributes"]
----
docker tag <image-name> docker-registry-default.helix.everis.cloud/<project>/<image-name>
----

And finally push it

[source,sh,subs="verbatim,attributes"]
----
docker push docker-registry-default.helix.everis.cloud/<project>/<image-name>
----
